<!DOCTYPE HTML>
<html><head><meta charset="utf-8"><title>Haskell.Extra.Delay</title><link rel="stylesheet" href="Agda.css"></head><body><pre class="Agda"><a id="1" class="Symbol">{-#</a> <a id="5" class="Keyword">OPTIONS</a> <a id="13" class="Pragma">--sized-types</a> <a id="27" class="Symbol">#-}</a>

<a id="32" class="Keyword">module</a> <a id="39" href="Haskell.Extra.Delay.html" class="Module">Haskell.Extra.Delay</a> <a id="59" class="Keyword">where</a>

<a id="66" class="Keyword">open</a> <a id="71" class="Keyword">import</a> <a id="78" href="Agda.Builtin.Size.html" class="Module">Agda.Builtin.Size</a> <a id="96" class="Keyword">public</a>

<a id="104" class="Keyword">open</a> <a id="109" class="Keyword">import</a> <a id="116" href="Haskell.Prelude.html" class="Module">Haskell.Prelude</a>
<a id="132" class="Keyword">open</a> <a id="137" class="Keyword">import</a> <a id="144" href="Haskell.Prim.Thunk.html" class="Module">Haskell.Prim.Thunk</a>
<a id="163" class="Keyword">open</a> <a id="168" class="Keyword">import</a> <a id="175" href="Haskell.Extra.Refinement.html" class="Module">Haskell.Extra.Refinement</a>

<a id="201" class="Keyword">private</a> <a id="209" class="Keyword">variable</a>
  <a id="220" href="Haskell.Extra.Delay.html#220" class="Generalizable">x</a> <a id="222" href="Haskell.Extra.Delay.html#222" class="Generalizable">y</a> <a id="224" href="Haskell.Extra.Delay.html#224" class="Generalizable">z</a> <a id="226" class="Symbol">:</a> <a id="228" href="Haskell.Prim.html#1191" class="Generalizable">a</a>
  <a id="232" class="Symbol">@</a><a id="233" class="Symbol">0</a> <a id="235" href="Haskell.Extra.Delay.html#235" class="Generalizable">i</a> <a id="237" class="Symbol">:</a> <a id="239" href="Agda.Builtin.Size.html#213" class="Postulate">Size</a>

<a id="245" class="Keyword">data</a> <a id="Delay"></a><a id="250" href="Haskell.Extra.Delay.html#250" class="Datatype">Delay</a> <a id="256" class="Symbol">(</a><a id="257" href="Haskell.Extra.Delay.html#257" class="Bound">a</a> <a id="259" class="Symbol">:</a> <a id="261" href="Agda.Primitive.html#388" class="Primitive">Set</a><a id="264" class="Symbol">)</a> <a id="266" class="Symbol">(@</a><a id="268" class="Symbol">0</a> <a id="270" href="Haskell.Extra.Delay.html#270" class="Bound">i</a> <a id="272" class="Symbol">:</a> <a id="274" href="Agda.Builtin.Size.html#213" class="Postulate">Size</a><a id="278" class="Symbol">)</a> <a id="280" class="Symbol">:</a> <a id="282" href="Agda.Primitive.html#388" class="Primitive">Set</a> <a id="286" class="Keyword">where</a>
  <a id="Delay.now"></a><a id="294" href="Haskell.Extra.Delay.html#294" class="InductiveConstructor">now</a> <a id="298" class="Symbol">:</a> <a id="300" href="Haskell.Extra.Delay.html#257" class="Bound">a</a> <a id="302" class="Symbol">→</a> <a id="304" href="Haskell.Extra.Delay.html#250" class="Datatype">Delay</a> <a id="310" href="Haskell.Extra.Delay.html#257" class="Bound">a</a> <a id="312" href="Haskell.Extra.Delay.html#270" class="Bound">i</a>
  <a id="Delay.later"></a><a id="316" href="Haskell.Extra.Delay.html#316" class="InductiveConstructor">later</a> <a id="322" class="Symbol">:</a> <a id="324" href="Haskell.Prim.Thunk.html#136" class="Record">Thunk</a> <a id="330" class="Symbol">(</a><a id="331" href="Haskell.Extra.Delay.html#250" class="Datatype">Delay</a> <a id="337" href="Haskell.Extra.Delay.html#257" class="Bound">a</a><a id="338" class="Symbol">)</a> <a id="340" href="Haskell.Extra.Delay.html#270" class="Bound">i</a> <a id="342" class="Symbol">→</a> <a id="344" href="Haskell.Extra.Delay.html#250" class="Datatype">Delay</a> <a id="350" href="Haskell.Extra.Delay.html#257" class="Bound">a</a> <a id="352" href="Haskell.Extra.Delay.html#270" class="Bound">i</a>

<a id="355" class="Keyword">data</a> <a id="HasResult"></a><a id="360" href="Haskell.Extra.Delay.html#360" class="Datatype">HasResult</a> <a id="370" class="Symbol">(</a><a id="371" href="Haskell.Extra.Delay.html#371" class="Bound">x</a> <a id="373" class="Symbol">:</a> <a id="375" href="Haskell.Prim.html#1191" class="Generalizable">a</a><a id="376" class="Symbol">)</a> <a id="378" class="Symbol">:</a> <a id="380" href="Haskell.Extra.Delay.html#250" class="Datatype">Delay</a> <a id="386" href="Haskell.Extra.Delay.html#375" class="Bound">a</a> <a id="388" href="Haskell.Extra.Delay.html#235" class="Generalizable">i</a> <a id="390" class="Symbol">→</a> <a id="392" href="Agda.Primitive.html#388" class="Primitive">Set</a> <a id="396" class="Keyword">where</a>
  <a id="HasResult.now"></a><a id="404" href="Haskell.Extra.Delay.html#404" class="InductiveConstructor">now</a>   <a id="410" class="Symbol">:</a> <a id="412" href="Haskell.Extra.Delay.html#360" class="Datatype">HasResult</a> <a id="422" href="Haskell.Extra.Delay.html#371" class="Bound">x</a> <a id="424" class="Symbol">(</a><a id="425" href="Haskell.Extra.Delay.html#294" class="InductiveConstructor">now</a> <a id="429" href="Haskell.Extra.Delay.html#371" class="Bound">x</a><a id="430" class="Symbol">)</a>
  <a id="HasResult.later"></a><a id="434" href="Haskell.Extra.Delay.html#434" class="InductiveConstructor">later</a> <a id="440" class="Symbol">:</a> <a id="442" href="Haskell.Extra.Delay.html#360" class="Datatype">HasResult</a> <a id="452" href="Haskell.Extra.Delay.html#371" class="Bound">x</a> <a id="454" class="Symbol">(</a><a id="455" href="Haskell.Extra.Delay.html#222" class="Generalizable">y</a> <a id="457" class="Symbol">.</a><a id="458" href="Haskell.Prim.Thunk.html#238" class="Field">force</a><a id="463" class="Symbol">)</a> <a id="465" class="Symbol">→</a> <a id="467" href="Haskell.Extra.Delay.html#360" class="Datatype">HasResult</a> <a id="477" href="Haskell.Extra.Delay.html#371" class="Bound">x</a> <a id="479" class="Symbol">(</a><a id="480" href="Haskell.Extra.Delay.html#316" class="InductiveConstructor">later</a> <a id="486" href="Haskell.Extra.Delay.html#222" class="Generalizable">y</a><a id="487" class="Symbol">)</a>

<a id="runDelay"></a><a id="490" href="Haskell.Extra.Delay.html#490" class="Function">runDelay</a> <a id="499" class="Symbol">:</a> <a id="501" class="Symbol">{@</a><a id="503" class="Symbol">0</a> <a id="505" href="Haskell.Extra.Delay.html#505" class="Bound">x</a> <a id="507" class="Symbol">:</a> <a id="509" href="Haskell.Prim.html#1191" class="Generalizable">a</a><a id="510" class="Symbol">}</a> <a id="512" class="Symbol">(</a><a id="513" href="Haskell.Extra.Delay.html#513" class="Bound">y</a> <a id="515" class="Symbol">:</a> <a id="517" href="Haskell.Extra.Delay.html#250" class="Datatype">Delay</a> <a id="523" href="Haskell.Prim.html#1191" class="Generalizable">a</a> <a id="525" href="Agda.Builtin.Size.html#315" class="Postulate">∞</a><a id="526" class="Symbol">)</a> <a id="528" class="Symbol">→</a> <a id="530" class="Symbol">@</a><a id="531" class="Symbol">0</a> <a id="533" href="Haskell.Extra.Delay.html#360" class="Datatype">HasResult</a> <a id="543" href="Haskell.Extra.Delay.html#505" class="Bound">x</a> <a id="545" href="Haskell.Extra.Delay.html#513" class="Bound">y</a> <a id="547" class="Symbol">→</a> <a id="549" href="Haskell.Prim.html#1191" class="Generalizable">a</a>
<a id="551" href="Haskell.Extra.Delay.html#490" class="Function">runDelay</a> <a id="560" class="Symbol">(</a><a id="561" href="Haskell.Extra.Delay.html#294" class="InductiveConstructor">now</a> <a id="565" href="Haskell.Extra.Delay.html#565" class="Bound">x</a><a id="566" class="Symbol">)</a> <a id="568" href="Haskell.Extra.Delay.html#404" class="InductiveConstructor">now</a> <a id="572" class="Symbol">=</a> <a id="574" href="Haskell.Extra.Delay.html#565" class="Bound">x</a>
<a id="576" href="Haskell.Extra.Delay.html#490" class="Function">runDelay</a> <a id="585" class="Symbol">(</a><a id="586" href="Haskell.Extra.Delay.html#316" class="InductiveConstructor">later</a> <a id="592" href="Haskell.Extra.Delay.html#592" class="Bound">y</a><a id="593" class="Symbol">)</a> <a id="595" class="Symbol">(</a><a id="596" href="Haskell.Extra.Delay.html#434" class="InductiveConstructor">later</a> <a id="602" href="Haskell.Extra.Delay.html#602" class="Bound">p</a><a id="603" class="Symbol">)</a> <a id="605" class="Symbol">=</a> <a id="607" href="Haskell.Extra.Delay.html#490" class="Function">runDelay</a> <a id="616" class="Symbol">(</a><a id="617" href="Haskell.Extra.Delay.html#592" class="Bound">y</a> <a id="619" class="Symbol">.</a><a id="620" href="Haskell.Prim.Thunk.html#238" class="Field">force</a><a id="625" class="Symbol">)</a> <a id="627" href="Haskell.Extra.Delay.html#602" class="Bound">p</a>

<a id="runDelaySound"></a><a id="630" href="Haskell.Extra.Delay.html#630" class="Function">runDelaySound</a> <a id="644" class="Symbol">:</a> <a id="646" class="Symbol">{@</a><a id="648" class="Symbol">0</a> <a id="650" href="Haskell.Extra.Delay.html#650" class="Bound">x</a> <a id="652" class="Symbol">:</a> <a id="654" href="Haskell.Prim.html#1191" class="Generalizable">a</a><a id="655" class="Symbol">}</a> <a id="657" class="Symbol">(</a><a id="658" href="Haskell.Extra.Delay.html#658" class="Bound">y</a> <a id="660" class="Symbol">:</a> <a id="662" href="Haskell.Extra.Delay.html#250" class="Datatype">Delay</a> <a id="668" href="Haskell.Prim.html#1191" class="Generalizable">a</a> <a id="670" href="Agda.Builtin.Size.html#315" class="Postulate">∞</a><a id="671" class="Symbol">)</a> <a id="673" class="Symbol">→</a> <a id="675" class="Symbol">(@</a><a id="677" class="Symbol">0</a> <a id="679" href="Haskell.Extra.Delay.html#679" class="Bound">hr</a> <a id="682" class="Symbol">:</a> <a id="684" href="Haskell.Extra.Delay.html#360" class="Datatype">HasResult</a> <a id="694" href="Haskell.Extra.Delay.html#650" class="Bound">x</a> <a id="696" href="Haskell.Extra.Delay.html#658" class="Bound">y</a><a id="697" class="Symbol">)</a> <a id="699" class="Symbol">→</a> <a id="701" href="Haskell.Extra.Delay.html#490" class="Function">runDelay</a> <a id="710" href="Haskell.Extra.Delay.html#658" class="Bound">y</a> <a id="712" href="Haskell.Extra.Delay.html#679" class="Bound">hr</a> <a id="715" href="Agda.Builtin.Equality.html#150" class="Datatype Operator">≡</a> <a id="717" href="Haskell.Extra.Delay.html#650" class="Bound">x</a>
<a id="719" href="Haskell.Extra.Delay.html#630" class="Function">runDelaySound</a> <a id="733" class="Symbol">(</a><a id="734" href="Haskell.Extra.Delay.html#294" class="InductiveConstructor">now</a> <a id="738" href="Haskell.Extra.Delay.html#738" class="Bound">x</a><a id="739" class="Symbol">)</a> <a id="741" href="Haskell.Extra.Delay.html#404" class="InductiveConstructor">now</a> <a id="745" class="Symbol">=</a> <a id="747" href="Agda.Builtin.Equality.html#207" class="InductiveConstructor">refl</a>
<a id="752" href="Haskell.Extra.Delay.html#630" class="Function">runDelaySound</a> <a id="766" class="Symbol">(</a><a id="767" href="Haskell.Extra.Delay.html#316" class="InductiveConstructor">later</a> <a id="773" href="Haskell.Extra.Delay.html#773" class="Bound">y</a><a id="774" class="Symbol">)</a> <a id="776" class="Symbol">(</a><a id="777" href="Haskell.Extra.Delay.html#434" class="InductiveConstructor">later</a> <a id="783" href="Haskell.Extra.Delay.html#783" class="Bound">hr</a><a id="785" class="Symbol">)</a> <a id="787" class="Symbol">=</a> <a id="789" href="Haskell.Extra.Delay.html#630" class="Function">runDelaySound</a> <a id="803" class="Symbol">(</a><a id="804" href="Haskell.Extra.Delay.html#773" class="Bound">y</a> <a id="806" class="Symbol">.</a><a id="807" href="Haskell.Prim.Thunk.html#238" class="Field">force</a><a id="812" class="Symbol">)</a> <a id="814" href="Haskell.Extra.Delay.html#783" class="Bound">hr</a>

<a id="818" class="Comment">-- tryDelay and unDelay cannot and should not be compiled to Haskell,</a>
<a id="888" class="Comment">-- so they are marked as erased.</a>
<a id="921" class="Symbol">@</a><a id="922" class="Symbol">0</a> <a id="tryDelay"></a><a id="924" href="Haskell.Extra.Delay.html#924" class="Function">tryDelay</a> <a id="933" class="Symbol">:</a> <a id="935" class="Symbol">(</a><a id="936" href="Haskell.Extra.Delay.html#936" class="Bound">y</a> <a id="938" class="Symbol">:</a> <a id="940" href="Haskell.Extra.Delay.html#250" class="Datatype">Delay</a> <a id="946" href="Haskell.Prim.html#1191" class="Generalizable">a</a> <a id="948" href="Agda.Builtin.Size.html#315" class="Postulate">∞</a><a id="949" class="Symbol">)</a> <a id="951" class="Symbol">→</a> <a id="953" href="Agda.Builtin.Nat.html#203" class="Datatype">Nat</a> <a id="957" class="Symbol">→</a> <a id="959" href="Haskell.Prim.Maybe.html#101" class="Datatype">Maybe</a> <a id="965" class="Symbol">(</a><a id="966" href="Haskell.Extra.Refinement.html#136" class="Record">∃</a> <a id="968" href="Haskell.Prim.html#1191" class="Generalizable">a</a> <a id="970" class="Symbol">(λ</a> <a id="973" href="Haskell.Extra.Delay.html#973" class="Bound">x</a> <a id="975" class="Symbol">→</a> <a id="977" href="Haskell.Extra.Delay.html#360" class="Datatype">HasResult</a> <a id="987" href="Haskell.Extra.Delay.html#973" class="Bound">x</a> <a id="989" href="Haskell.Extra.Delay.html#936" class="Bound">y</a><a id="990" class="Symbol">))</a>
<a id="993" href="Haskell.Extra.Delay.html#924" class="Function">tryDelay</a> <a id="1002" class="Symbol">(</a><a id="1003" href="Haskell.Extra.Delay.html#294" class="InductiveConstructor">now</a> <a id="1007" href="Haskell.Extra.Delay.html#1007" class="Bound">x</a><a id="1008" class="Symbol">)</a>   <a id="1012" class="Symbol">_</a>       <a id="1020" class="Symbol">=</a> <a id="1022" href="Haskell.Prim.Maybe.html#162" class="InductiveConstructor">Just</a> <a id="1027" class="Symbol">(</a><a id="1028" href="Haskell.Extra.Delay.html#1007" class="Bound">x</a> <a id="1030" href="Haskell.Extra.Refinement.html#205" class="InductiveConstructor Operator">⟨</a> <a id="1032" href="Haskell.Extra.Delay.html#404" class="InductiveConstructor">now</a> <a id="1036" href="Haskell.Extra.Refinement.html#205" class="InductiveConstructor Operator">⟩</a><a id="1037" class="Symbol">)</a>
<a id="1039" href="Haskell.Extra.Delay.html#924" class="Function">tryDelay</a> <a id="1048" class="Symbol">(</a><a id="1049" href="Haskell.Extra.Delay.html#316" class="InductiveConstructor">later</a> <a id="1055" href="Haskell.Extra.Delay.html#1055" class="Bound">y</a><a id="1056" class="Symbol">)</a> <a id="1058" href="Agda.Builtin.Nat.html#221" class="InductiveConstructor">zero</a>    <a id="1066" class="Symbol">=</a> <a id="1068" href="Haskell.Prim.Maybe.html#142" class="InductiveConstructor">Nothing</a>
<a id="1076" href="Haskell.Extra.Delay.html#924" class="Function">tryDelay</a> <a id="1085" class="Symbol">(</a><a id="1086" href="Haskell.Extra.Delay.html#316" class="InductiveConstructor">later</a> <a id="1092" href="Haskell.Extra.Delay.html#1092" class="Bound">y</a><a id="1093" class="Symbol">)</a> <a id="1095" class="Symbol">(</a><a id="1096" href="Agda.Builtin.Nat.html#234" class="InductiveConstructor">suc</a> <a id="1100" href="Haskell.Extra.Delay.html#1100" class="Bound">n</a><a id="1101" class="Symbol">)</a> <a id="1103" class="Symbol">=</a> <a id="1105" href="Haskell.Prim.Functor.html#389" class="Field">fmap</a> <a id="1110" class="Symbol">(</a><a id="1111" href="Haskell.Extra.Refinement.html#307" class="Function">mapRefine</a> <a id="1121" href="Haskell.Extra.Delay.html#434" class="InductiveConstructor">later</a><a id="1126" class="Symbol">)</a> <a id="1128" class="Symbol">(</a><a id="1129" href="Haskell.Extra.Delay.html#924" class="Function">tryDelay</a> <a id="1138" class="Symbol">(</a><a id="1139" href="Haskell.Extra.Delay.html#1092" class="Bound">y</a> <a id="1141" class="Symbol">.</a><a id="1142" href="Haskell.Prim.Thunk.html#238" class="Field">force</a><a id="1147" class="Symbol">)</a> <a id="1149" href="Haskell.Extra.Delay.html#1100" class="Bound">n</a><a id="1150" class="Symbol">)</a>

<a id="1153" class="Symbol">@</a><a id="1154" class="Symbol">0</a> <a id="unDelay"></a><a id="1156" href="Haskell.Extra.Delay.html#1156" class="Function">unDelay</a> <a id="1164" class="Symbol">:</a> <a id="1166" class="Symbol">(</a><a id="1167" href="Haskell.Extra.Delay.html#1167" class="Bound">y</a> <a id="1169" class="Symbol">:</a> <a id="1171" href="Haskell.Extra.Delay.html#250" class="Datatype">Delay</a> <a id="1177" href="Haskell.Prim.html#1191" class="Generalizable">a</a> <a id="1179" href="Agda.Builtin.Size.html#315" class="Postulate">∞</a><a id="1180" class="Symbol">)</a> <a id="1182" class="Symbol">(</a><a id="1183" href="Haskell.Extra.Delay.html#1183" class="Bound">n</a> <a id="1185" class="Symbol">:</a> <a id="1187" href="Agda.Builtin.Nat.html#203" class="Datatype">Nat</a><a id="1190" class="Symbol">)</a> <a id="1192" class="Symbol">→</a> <a id="1194" class="Symbol">@</a><a id="1195" class="Symbol">0</a> <a id="1197" class="Symbol">{</a><a id="1198" href="Haskell.Prelude.html#4199" class="Function">IsJust</a> <a id="1205" class="Symbol">(</a><a id="1206" href="Haskell.Extra.Delay.html#924" class="Function">tryDelay</a> <a id="1215" href="Haskell.Extra.Delay.html#1167" class="Bound">y</a> <a id="1217" href="Haskell.Extra.Delay.html#1183" class="Bound">n</a><a id="1218" class="Symbol">)}</a> <a id="1221" class="Symbol">→</a> <a id="1223" href="Haskell.Prim.html#1191" class="Generalizable">a</a>
<a id="1225" href="Haskell.Extra.Delay.html#1156" class="Function">unDelay</a> <a id="1233" href="Haskell.Extra.Delay.html#1233" class="Bound">y</a> <a id="1235" href="Haskell.Extra.Delay.html#1235" class="Bound">n</a> <a id="1237" class="Symbol">{</a><a id="1238" href="Haskell.Extra.Delay.html#1238" class="Bound">p</a><a id="1239" class="Symbol">}</a> <a id="1241" class="Symbol">=</a> <a id="1243" href="Haskell.Prelude.html#4263" class="Function">fromJust</a> <a id="1252" class="Symbol">(</a><a id="1253" href="Haskell.Extra.Delay.html#924" class="Function">tryDelay</a> <a id="1262" href="Haskell.Extra.Delay.html#1233" class="Bound">y</a> <a id="1264" href="Haskell.Extra.Delay.html#1235" class="Bound">n</a><a id="1265" class="Symbol">)</a> <a id="1267" class="Symbol">{</a><a id="1268" href="Haskell.Extra.Delay.html#1238" class="Bound">p</a><a id="1269" class="Symbol">}</a> <a id="1271" class="Symbol">.</a><a id="1272" href="Haskell.Extra.Refinement.html#222" class="Field">value</a>
</pre></body></html>