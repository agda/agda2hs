<!DOCTYPE HTML>
<html><head><meta charset="utf-8"><title>Haskell.Extra.Delay</title><link rel="stylesheet" href="Agda.css"></head><body><pre class="Agda"><a id="1" class="Symbol">{-#</a> <a id="5" class="Keyword">OPTIONS</a> <a id="13" class="Pragma">--sized-types</a> <a id="27" class="Symbol">#-}</a>

<a id="32" class="Keyword">module</a> <a id="39" href="Haskell.Extra.Delay.html" class="Module">Haskell.Extra.Delay</a> <a id="59" class="Keyword">where</a>

<a id="66" class="Keyword">open</a> <a id="71" class="Keyword">import</a> <a id="78" href="Agda.Builtin.Size.html" class="Module">Agda.Builtin.Size</a> <a id="96" class="Keyword">public</a>

<a id="104" class="Keyword">open</a> <a id="109" class="Keyword">import</a> <a id="116" href="Haskell.Prelude.html" class="Module">Haskell.Prelude</a>

<a id="133" class="Keyword">open</a> <a id="138" class="Keyword">import</a> <a id="145" href="Haskell.Data.Maybe.html" class="Module">Haskell.Data.Maybe</a>
<a id="164" class="Keyword">open</a> <a id="169" class="Keyword">import</a> <a id="176" href="Haskell.Extra.Refinement.html" class="Module">Haskell.Extra.Refinement</a>
<a id="201" class="Keyword">open</a> <a id="206" class="Keyword">import</a> <a id="213" href="Haskell.Prim.Thunk.html" class="Module">Haskell.Prim.Thunk</a>

<a id="233" class="Keyword">private</a> <a id="241" class="Keyword">variable</a>
  <a id="252" href="Haskell.Extra.Delay.html#252" class="Generalizable">x</a> <a id="254" href="Haskell.Extra.Delay.html#254" class="Generalizable">y</a> <a id="256" href="Haskell.Extra.Delay.html#256" class="Generalizable">z</a> <a id="258" class="Symbol">:</a> <a id="260" href="Haskell.Prim.html#1214" class="Generalizable">a</a>
  <a id="264" class="Symbol">@</a><a id="265" class="Symbol">0</a> <a id="267" href="Haskell.Extra.Delay.html#267" class="Generalizable">i</a> <a id="269" class="Symbol">:</a> <a id="271" href="Agda.Builtin.Size.html#213" class="Postulate">Size</a>

<a id="277" class="Keyword">data</a> <a id="Delay"></a><a id="282" href="Haskell.Extra.Delay.html#282" class="Datatype">Delay</a> <a id="288" class="Symbol">(</a><a id="289" href="Haskell.Extra.Delay.html#289" class="Bound">a</a> <a id="291" class="Symbol">:</a> <a id="293" href="Agda.Primitive.html#388" class="Primitive">Type</a><a id="297" class="Symbol">)</a> <a id="299" class="Symbol">(@</a><a id="301" class="Symbol">0</a> <a id="303" href="Haskell.Extra.Delay.html#303" class="Bound">i</a> <a id="305" class="Symbol">:</a> <a id="307" href="Agda.Builtin.Size.html#213" class="Postulate">Size</a><a id="311" class="Symbol">)</a> <a id="313" class="Symbol">:</a> <a id="315" href="Agda.Primitive.html#388" class="Primitive">Type</a> <a id="320" class="Keyword">where</a>
  <a id="Delay.now"></a><a id="328" href="Haskell.Extra.Delay.html#328" class="InductiveConstructor">now</a> <a id="332" class="Symbol">:</a> <a id="334" href="Haskell.Extra.Delay.html#289" class="Bound">a</a> <a id="336" class="Symbol">→</a> <a id="338" href="Haskell.Extra.Delay.html#282" class="Datatype">Delay</a> <a id="344" href="Haskell.Extra.Delay.html#289" class="Bound">a</a> <a id="346" href="Haskell.Extra.Delay.html#303" class="Bound">i</a>
  <a id="Delay.later"></a><a id="350" href="Haskell.Extra.Delay.html#350" class="InductiveConstructor">later</a> <a id="356" class="Symbol">:</a> <a id="358" href="Haskell.Prim.Thunk.html#136" class="Record">Thunk</a> <a id="364" class="Symbol">(</a><a id="365" href="Haskell.Extra.Delay.html#282" class="Datatype">Delay</a> <a id="371" href="Haskell.Extra.Delay.html#289" class="Bound">a</a><a id="372" class="Symbol">)</a> <a id="374" href="Haskell.Extra.Delay.html#303" class="Bound">i</a> <a id="376" class="Symbol">→</a> <a id="378" href="Haskell.Extra.Delay.html#282" class="Datatype">Delay</a> <a id="384" href="Haskell.Extra.Delay.html#289" class="Bound">a</a> <a id="386" href="Haskell.Extra.Delay.html#303" class="Bound">i</a>

<a id="389" class="Keyword">data</a> <a id="HasResult"></a><a id="394" href="Haskell.Extra.Delay.html#394" class="Datatype">HasResult</a> <a id="404" class="Symbol">(</a><a id="405" href="Haskell.Extra.Delay.html#405" class="Bound">x</a> <a id="407" class="Symbol">:</a> <a id="409" href="Haskell.Prim.html#1214" class="Generalizable">a</a><a id="410" class="Symbol">)</a> <a id="412" class="Symbol">:</a> <a id="414" href="Haskell.Extra.Delay.html#282" class="Datatype">Delay</a> <a id="420" href="Haskell.Extra.Delay.html#409" class="Bound">a</a> <a id="422" href="Haskell.Extra.Delay.html#267" class="Generalizable">i</a> <a id="424" class="Symbol">→</a> <a id="426" href="Agda.Primitive.html#388" class="Primitive">Type</a> <a id="431" class="Keyword">where</a>
  <a id="HasResult.now"></a><a id="439" href="Haskell.Extra.Delay.html#439" class="InductiveConstructor">now</a>   <a id="445" class="Symbol">:</a> <a id="447" href="Haskell.Extra.Delay.html#394" class="Datatype">HasResult</a> <a id="457" href="Haskell.Extra.Delay.html#405" class="Bound">x</a> <a id="459" class="Symbol">(</a><a id="460" href="Haskell.Extra.Delay.html#328" class="InductiveConstructor">now</a> <a id="464" href="Haskell.Extra.Delay.html#405" class="Bound">x</a><a id="465" class="Symbol">)</a>
  <a id="HasResult.later"></a><a id="469" href="Haskell.Extra.Delay.html#469" class="InductiveConstructor">later</a> <a id="475" class="Symbol">:</a> <a id="477" href="Haskell.Extra.Delay.html#394" class="Datatype">HasResult</a> <a id="487" href="Haskell.Extra.Delay.html#405" class="Bound">x</a> <a id="489" class="Symbol">(</a><a id="490" href="Haskell.Extra.Delay.html#254" class="Generalizable">y</a> <a id="492" class="Symbol">.</a><a id="493" href="Haskell.Prim.Thunk.html#240" class="Field">force</a><a id="498" class="Symbol">)</a> <a id="500" class="Symbol">→</a> <a id="502" href="Haskell.Extra.Delay.html#394" class="Datatype">HasResult</a> <a id="512" href="Haskell.Extra.Delay.html#405" class="Bound">x</a> <a id="514" class="Symbol">(</a><a id="515" href="Haskell.Extra.Delay.html#350" class="InductiveConstructor">later</a> <a id="521" href="Haskell.Extra.Delay.html#254" class="Generalizable">y</a><a id="522" class="Symbol">)</a>

<a id="runDelay"></a><a id="525" href="Haskell.Extra.Delay.html#525" class="Function">runDelay</a> <a id="534" class="Symbol">:</a> <a id="536" class="Symbol">{@</a><a id="538" class="Symbol">0</a> <a id="540" href="Haskell.Extra.Delay.html#540" class="Bound">x</a> <a id="542" class="Symbol">:</a> <a id="544" href="Haskell.Prim.html#1214" class="Generalizable">a</a><a id="545" class="Symbol">}</a> <a id="547" class="Symbol">(</a><a id="548" href="Haskell.Extra.Delay.html#548" class="Bound">y</a> <a id="550" class="Symbol">:</a> <a id="552" href="Haskell.Extra.Delay.html#282" class="Datatype">Delay</a> <a id="558" href="Haskell.Prim.html#1214" class="Generalizable">a</a> <a id="560" href="Agda.Builtin.Size.html#315" class="Postulate">∞</a><a id="561" class="Symbol">)</a> <a id="563" class="Symbol">→</a> <a id="565" class="Symbol">@</a><a id="566" class="Symbol">0</a> <a id="568" href="Haskell.Extra.Delay.html#394" class="Datatype">HasResult</a> <a id="578" href="Haskell.Extra.Delay.html#540" class="Bound">x</a> <a id="580" href="Haskell.Extra.Delay.html#548" class="Bound">y</a> <a id="582" class="Symbol">→</a> <a id="584" href="Haskell.Prim.html#1214" class="Generalizable">a</a>
<a id="586" href="Haskell.Extra.Delay.html#525" class="Function">runDelay</a> <a id="595" class="Symbol">(</a><a id="596" href="Haskell.Extra.Delay.html#328" class="InductiveConstructor">now</a> <a id="600" href="Haskell.Extra.Delay.html#600" class="Bound">x</a><a id="601" class="Symbol">)</a> <a id="603" href="Haskell.Extra.Delay.html#439" class="InductiveConstructor">now</a> <a id="607" class="Symbol">=</a> <a id="609" href="Haskell.Extra.Delay.html#600" class="Bound">x</a>
<a id="611" href="Haskell.Extra.Delay.html#525" class="Function">runDelay</a> <a id="620" class="Symbol">(</a><a id="621" href="Haskell.Extra.Delay.html#350" class="InductiveConstructor">later</a> <a id="627" href="Haskell.Extra.Delay.html#627" class="Bound">y</a><a id="628" class="Symbol">)</a> <a id="630" class="Symbol">(</a><a id="631" href="Haskell.Extra.Delay.html#469" class="InductiveConstructor">later</a> <a id="637" href="Haskell.Extra.Delay.html#637" class="Bound">p</a><a id="638" class="Symbol">)</a> <a id="640" class="Symbol">=</a> <a id="642" href="Haskell.Extra.Delay.html#525" class="Function">runDelay</a> <a id="651" class="Symbol">(</a><a id="652" href="Haskell.Extra.Delay.html#627" class="Bound">y</a> <a id="654" class="Symbol">.</a><a id="655" href="Haskell.Prim.Thunk.html#240" class="Field">force</a><a id="660" class="Symbol">)</a> <a id="662" href="Haskell.Extra.Delay.html#637" class="Bound">p</a>

<a id="runDelaySound"></a><a id="665" href="Haskell.Extra.Delay.html#665" class="Function">runDelaySound</a> <a id="679" class="Symbol">:</a> <a id="681" class="Symbol">{@</a><a id="683" class="Symbol">0</a> <a id="685" href="Haskell.Extra.Delay.html#685" class="Bound">x</a> <a id="687" class="Symbol">:</a> <a id="689" href="Haskell.Prim.html#1214" class="Generalizable">a</a><a id="690" class="Symbol">}</a> <a id="692" class="Symbol">(</a><a id="693" href="Haskell.Extra.Delay.html#693" class="Bound">y</a> <a id="695" class="Symbol">:</a> <a id="697" href="Haskell.Extra.Delay.html#282" class="Datatype">Delay</a> <a id="703" href="Haskell.Prim.html#1214" class="Generalizable">a</a> <a id="705" href="Agda.Builtin.Size.html#315" class="Postulate">∞</a><a id="706" class="Symbol">)</a> <a id="708" class="Symbol">→</a> <a id="710" class="Symbol">(@</a><a id="712" class="Symbol">0</a> <a id="714" href="Haskell.Extra.Delay.html#714" class="Bound">hr</a> <a id="717" class="Symbol">:</a> <a id="719" href="Haskell.Extra.Delay.html#394" class="Datatype">HasResult</a> <a id="729" href="Haskell.Extra.Delay.html#685" class="Bound">x</a> <a id="731" href="Haskell.Extra.Delay.html#693" class="Bound">y</a><a id="732" class="Symbol">)</a> <a id="734" class="Symbol">→</a> <a id="736" href="Haskell.Extra.Delay.html#525" class="Function">runDelay</a> <a id="745" href="Haskell.Extra.Delay.html#693" class="Bound">y</a> <a id="747" href="Haskell.Extra.Delay.html#714" class="Bound">hr</a> <a id="750" href="Agda.Builtin.Equality.html#150" class="Datatype Operator">≡</a> <a id="752" href="Haskell.Extra.Delay.html#685" class="Bound">x</a>
<a id="754" href="Haskell.Extra.Delay.html#665" class="Function">runDelaySound</a> <a id="768" class="Symbol">(</a><a id="769" href="Haskell.Extra.Delay.html#328" class="InductiveConstructor">now</a> <a id="773" href="Haskell.Extra.Delay.html#773" class="Bound">x</a><a id="774" class="Symbol">)</a> <a id="776" href="Haskell.Extra.Delay.html#439" class="InductiveConstructor">now</a> <a id="780" class="Symbol">=</a> <a id="782" href="Agda.Builtin.Equality.html#207" class="InductiveConstructor">refl</a>
<a id="787" href="Haskell.Extra.Delay.html#665" class="Function">runDelaySound</a> <a id="801" class="Symbol">(</a><a id="802" href="Haskell.Extra.Delay.html#350" class="InductiveConstructor">later</a> <a id="808" href="Haskell.Extra.Delay.html#808" class="Bound">y</a><a id="809" class="Symbol">)</a> <a id="811" class="Symbol">(</a><a id="812" href="Haskell.Extra.Delay.html#469" class="InductiveConstructor">later</a> <a id="818" href="Haskell.Extra.Delay.html#818" class="Bound">hr</a><a id="820" class="Symbol">)</a> <a id="822" class="Symbol">=</a> <a id="824" href="Haskell.Extra.Delay.html#665" class="Function">runDelaySound</a> <a id="838" class="Symbol">(</a><a id="839" href="Haskell.Extra.Delay.html#808" class="Bound">y</a> <a id="841" class="Symbol">.</a><a id="842" href="Haskell.Prim.Thunk.html#240" class="Field">force</a><a id="847" class="Symbol">)</a> <a id="849" href="Haskell.Extra.Delay.html#818" class="Bound">hr</a>

<a id="853" class="Comment">-- tryDelay and unDelay cannot and should not be compiled to Haskell,</a>
<a id="923" class="Comment">-- so they are marked as erased.</a>
<a id="956" class="Symbol">@</a><a id="957" class="Symbol">0</a> <a id="tryDelay"></a><a id="959" href="Haskell.Extra.Delay.html#959" class="Function">tryDelay</a> <a id="968" class="Symbol">:</a> <a id="970" class="Symbol">(</a><a id="971" href="Haskell.Extra.Delay.html#971" class="Bound">y</a> <a id="973" class="Symbol">:</a> <a id="975" href="Haskell.Extra.Delay.html#282" class="Datatype">Delay</a> <a id="981" href="Haskell.Prim.html#1214" class="Generalizable">a</a> <a id="983" href="Agda.Builtin.Size.html#315" class="Postulate">∞</a><a id="984" class="Symbol">)</a> <a id="986" class="Symbol">→</a> <a id="988" href="Agda.Builtin.Nat.html#203" class="Datatype">Nat</a> <a id="992" class="Symbol">→</a> <a id="994" href="Haskell.Prim.Maybe.html#126" class="Datatype">Maybe</a> <a id="1000" class="Symbol">(</a><a id="1001" href="Haskell.Extra.Refinement.html#136" class="Record">∃</a> <a id="1003" href="Haskell.Prim.html#1214" class="Generalizable">a</a> <a id="1005" class="Symbol">(λ</a> <a id="1008" href="Haskell.Extra.Delay.html#1008" class="Bound">x</a> <a id="1010" class="Symbol">→</a> <a id="1012" href="Haskell.Extra.Delay.html#394" class="Datatype">HasResult</a> <a id="1022" href="Haskell.Extra.Delay.html#1008" class="Bound">x</a> <a id="1024" href="Haskell.Extra.Delay.html#971" class="Bound">y</a><a id="1025" class="Symbol">))</a>
<a id="1028" href="Haskell.Extra.Delay.html#959" class="Function">tryDelay</a> <a id="1037" class="Symbol">(</a><a id="1038" href="Haskell.Extra.Delay.html#328" class="InductiveConstructor">now</a> <a id="1042" href="Haskell.Extra.Delay.html#1042" class="Bound">x</a><a id="1043" class="Symbol">)</a>   <a id="1047" class="Symbol">_</a>       <a id="1055" class="Symbol">=</a> <a id="1057" href="Haskell.Prim.Maybe.html#189" class="InductiveConstructor">Just</a> <a id="1062" class="Symbol">(</a><a id="1063" href="Haskell.Extra.Delay.html#1042" class="Bound">x</a> <a id="1065" href="Haskell.Extra.Refinement.html#208" class="InductiveConstructor Operator">⟨</a> <a id="1067" href="Haskell.Extra.Delay.html#439" class="InductiveConstructor">now</a> <a id="1071" href="Haskell.Extra.Refinement.html#208" class="InductiveConstructor Operator">⟩</a><a id="1072" class="Symbol">)</a>
<a id="1074" href="Haskell.Extra.Delay.html#959" class="Function">tryDelay</a> <a id="1083" class="Symbol">(</a><a id="1084" href="Haskell.Extra.Delay.html#350" class="InductiveConstructor">later</a> <a id="1090" href="Haskell.Extra.Delay.html#1090" class="Bound">y</a><a id="1091" class="Symbol">)</a> <a id="1093" href="Agda.Builtin.Nat.html#221" class="InductiveConstructor">zero</a>    <a id="1101" class="Symbol">=</a> <a id="1103" href="Haskell.Prim.Maybe.html#169" class="InductiveConstructor">Nothing</a>
<a id="1111" href="Haskell.Extra.Delay.html#959" class="Function">tryDelay</a> <a id="1120" class="Symbol">(</a><a id="1121" href="Haskell.Extra.Delay.html#350" class="InductiveConstructor">later</a> <a id="1127" href="Haskell.Extra.Delay.html#1127" class="Bound">y</a><a id="1128" class="Symbol">)</a> <a id="1130" class="Symbol">(</a><a id="1131" href="Agda.Builtin.Nat.html#234" class="InductiveConstructor">suc</a> <a id="1135" href="Haskell.Extra.Delay.html#1135" class="Bound">n</a><a id="1136" class="Symbol">)</a> <a id="1138" class="Symbol">=</a> <a id="1140" href="Haskell.Prim.Functor.html#364" class="Field">fmap</a> <a id="1145" class="Symbol">(</a><a id="1146" href="Haskell.Extra.Refinement.html#310" class="Function">mapRefine</a> <a id="1156" href="Haskell.Extra.Delay.html#469" class="InductiveConstructor">later</a><a id="1161" class="Symbol">)</a> <a id="1163" class="Symbol">(</a><a id="1164" href="Haskell.Extra.Delay.html#959" class="Function">tryDelay</a> <a id="1173" class="Symbol">(</a><a id="1174" href="Haskell.Extra.Delay.html#1127" class="Bound">y</a> <a id="1176" class="Symbol">.</a><a id="1177" href="Haskell.Prim.Thunk.html#240" class="Field">force</a><a id="1182" class="Symbol">)</a> <a id="1184" href="Haskell.Extra.Delay.html#1135" class="Bound">n</a><a id="1185" class="Symbol">)</a>

<a id="1188" class="Symbol">@</a><a id="1189" class="Symbol">0</a> <a id="unDelay"></a><a id="1191" href="Haskell.Extra.Delay.html#1191" class="Function">unDelay</a> <a id="1199" class="Symbol">:</a> <a id="1201" class="Symbol">(</a><a id="1202" href="Haskell.Extra.Delay.html#1202" class="Bound">y</a> <a id="1204" class="Symbol">:</a> <a id="1206" href="Haskell.Extra.Delay.html#282" class="Datatype">Delay</a> <a id="1212" href="Haskell.Prim.html#1214" class="Generalizable">a</a> <a id="1214" href="Agda.Builtin.Size.html#315" class="Postulate">∞</a><a id="1215" class="Symbol">)</a> <a id="1217" class="Symbol">(</a><a id="1218" href="Haskell.Extra.Delay.html#1218" class="Bound">n</a> <a id="1220" class="Symbol">:</a> <a id="1222" href="Agda.Builtin.Nat.html#203" class="Datatype">Nat</a><a id="1225" class="Symbol">)</a> <a id="1227" class="Symbol">→</a> <a id="1229" class="Symbol">@</a><a id="1230" class="Symbol">0</a> <a id="1232" class="Symbol">{</a><a id="1233" href="Haskell.Prelude.html#4241" class="Function">IsJust</a> <a id="1240" class="Symbol">(</a><a id="1241" href="Haskell.Extra.Delay.html#959" class="Function">tryDelay</a> <a id="1250" href="Haskell.Extra.Delay.html#1202" class="Bound">y</a> <a id="1252" href="Haskell.Extra.Delay.html#1218" class="Bound">n</a><a id="1253" class="Symbol">)}</a> <a id="1256" class="Symbol">→</a> <a id="1258" href="Haskell.Prim.html#1214" class="Generalizable">a</a>
<a id="1260" href="Haskell.Extra.Delay.html#1191" class="Function">unDelay</a> <a id="1268" href="Haskell.Extra.Delay.html#1268" class="Bound">y</a> <a id="1270" href="Haskell.Extra.Delay.html#1270" class="Bound">n</a> <a id="1272" class="Symbol">{</a><a id="1273" href="Haskell.Extra.Delay.html#1273" class="Bound">p</a><a id="1274" class="Symbol">}</a> <a id="1276" class="Symbol">=</a> <a id="1278" href="Haskell.Data.Maybe.html#216" class="Function">fromJust</a> <a id="1287" class="Symbol">(</a><a id="1288" href="Haskell.Extra.Delay.html#959" class="Function">tryDelay</a> <a id="1297" href="Haskell.Extra.Delay.html#1268" class="Bound">y</a> <a id="1299" href="Haskell.Extra.Delay.html#1270" class="Bound">n</a><a id="1300" class="Symbol">)</a> <a id="1302" class="Symbol">{</a><a id="1303" href="Haskell.Extra.Delay.html#1273" class="Bound">p</a><a id="1304" class="Symbol">}</a> <a id="1306" class="Symbol">.</a><a id="1307" href="Haskell.Extra.Refinement.html#225" class="Field">value</a>
</pre></body></html>